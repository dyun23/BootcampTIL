# 데이터베이스
## KEY
### PRIMARY KEY
튜플을 구별할 수 있는 기본키  
중복된 값을 가질 수 없음  

```sql
속성이름 타입 AUTO_INCREMENT PRIMARY KEY # 속성 생성할 때 같이 지정 가능, AUTO_INCREMENT는 값 자동 부여
⁝
PRIMARY KEY (속성이름) # 하단에서 따로 지정 가능
```
  
### FOREIGN KEY
다른 테이블의 기본키를 참조하는 참조키

```sql
속성이름 타입,
⁝
FOREIGN KEY (속성이름) REFERENCES 테이블이름 (속성이름)
```


## VIEW
가상의 테이블이라 데이터를 보여주는 역할만 함  
여러 테이블을 합쳐서 간편하게 데이터 검색 가능

```sql
CREATE VIEW 뷰이름 AS
SELECT 속성, 속성
FROM 테이블이름
WHERE 조건
```


## INDEX
데이터를 더 빨리 찾기 위해 주요 속성만 따로 저장한 것  
└ 테이블 전체를 다 검색하지 않기 때문에 속도 ↑  

```sql
CREATE INDEX 인덱스이름
ON 테이블이름 (속성, 속성, ...)
```  
 
- `EXPLAIN` : 쿼리의 실행 계획 조회
- `const` :  WHERE 조건에서 상수와 일치하는 행 탐색
- `ref` : 키에 의해 데이터 읽는데 사용  
- `range` : 인덱스에서 범위를 지정해 해당하는 행 탐색
- `all` :  테이블 전체에서 모든 행을 검색  
  
 **B-TREE INDEX**  
B-TREE 구조 : 이진 트리에서 확장해 n개의 자식 노드    
가장 일반적 INDEX 형태  
항상 균형을 맞춰 균형 트리  
PK를 통해 데이터를 읽음  


## +) 컴파일 언어 vs 인터프리터 언어
- **컴파일 언어** : 사람이 알아볼 수 있는 코드를 컴퓨터가 알아볼 수 있는 코드로 변경하고 변경된 코드를 실행  
└ 컴파일러로 컴파일 후 실행 *ex) sql, java(완전한 컴파일 언어는 X)*
- **인터프리터 언어** : 사람이 알아볼 수 있는 코드를 그대로 실행  
└ 인터프리터로 실행 *ex) javascript, python*


## 스토어드 프로시저
- 일반 쿼리문 실행
1. 구문분석, 문법 오류 확인, 데이터타입 변경
2. 표준화
3. 최적화, 쿼리분석, 인덱스 탐색 및 선택, 테이블 조인
4. 컴파일
5. 실행 코드 생성
6. 실행
   
- 스토어드 프로시저
1. 1~4 동일
2. **실행 코드 저장**
3. 스토어드 프로시저 호출, **파라미터** 넘김
4. 실행 코드 실행

```sql
DELIMITER $$ # 다른 특수문자도 가능, 통상적으로 $$
CREATE PROCEDURE SP이름 (IN 또는 OUT 속성)
BEGIN
    쿼리
END $$
DELIMITER ;

CALL SP이름(); # sp 호출
```

